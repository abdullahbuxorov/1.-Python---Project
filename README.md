# 1.-Python---Project


Проект: Анализ данных пассажиров Титаника
Цель проекта
Исследовать, очистить и обработать данные о пассажирах Титаника, выявить ключевые факторы, влияющие на выживаемость, и визуализировать результаты.
Этапы выполнения
1. Импорт и первичный анализ данных. Exploratory Data Analysis (EDA)
• Загрузите данные из файлов train.csv, test.csv и gender_submission.csv.
 • Проведите базовое исследование структуры данных, используя методы .head(), .info() и .describe(), чтобы понять, какие столбцы содержат пропуски или выбросы.
2. Очистка данных. Data Cleaning
• Обработка пропущенных значений:
   - Столбец Age: Заполните пропуски медианным значением или средним значением в зависимости от пассажирского класса и пола.
   - Столбец Embarked: Заполните пропуски наиболее частым значением.
   - Столбец Cabin: Этот столбец может содержать много пропусков, поэтому можно либо оставить только первую букву каюты, либо удалить столбец полностью.
   - Столбец Fare: Проверьте наличие пропущенных значений и заполните их медианным значением.
 • Обработка выбросов:
   - Проверьте значения в столбцах Age и Fare на наличие аномально высоких или низких значений и решите, что с ними делать.
Embarked: обозначает порт, из которого пассажир сел на борт корабля.
C — Cherbourg (Шербур)
Q — Queenstown (Куинстаун)
S — Southampton (Саутгемптон)

3. Создание новых признаков. Feature Engineering
• Извлеките титул пассажира из столбца Name и создайте новый признак Title, который может повлиять на выживаемость.
 • Создайте признак FamilySize на основе количества родственников на борту (SibSp и Parch).
 • Создайте бинарный признак IsAlone, указывающий, путешествовал ли пассажир один.
4. Анализ и визуализация данных. Data Visualization
• Проведите анализ факторов, влияющих на выживаемость, с помощью следующих визуализаций:
   - Гистограмма выживаемости (Survived): Покажите распределение выживания по категориям (выжил / не выжил).
   - Гистограмма распределения возраста (Age): Покажите распределение возраста среди выживших и не выживших.
   - Диаграмма размаха (boxplot) для стоимости билета (Fare): Показать разброс стоимости билета в зависимости от класса (Pclass) и статуса выживаемости.
   - Столбчатая диаграмма по классу и полу (Pclass, Sex): Сравните процент выживших в разных классах для мужчин и женщин.
   - Групповая столбчатая диаграмма (barplot) для FamilySize и выживаемости: Показать влияние размера семьи на выживаемость.
   - Круговая диаграмма для пункта отправления (Embarked): Показать процент выживших и не выживших для каждого пункта отправления.
   - Диаграмма рассеяния (scatterplot): Показать взаимосвязь между возрастом и стоимостью билета, используя цвет для обозначения выживаемости (Survived).
   - Тепловая карта корреляций (heatmap): Постройте корреляционную матрицу для количественных переменных, чтобы выявить взаимосвязи между различными признаками.
5. Сортировка и группировка данных. Data Aggregation & Grouping
• Выполните группировку по таким признакам, как Pclass, Sex, Embarked и FamilySize, чтобы изучить средний показатель выживаемости для каждой группы.
 • Используйте группировку и сортировку для анализа зависимости между стоимостью билета и классом (Pclass), а также между размером семьи и выживаемостью.
6. Подготовка отчета. Report Preparation
• Оформите краткий отчет о проделанной работе с описанием подходов к очистке и обработке данных, выводами по визуализациям и выявленным факторам, влияющим на выживаемость пассажиров.
Результат
Ваш проект должен включать:
 • Очищенные данные.
 • Набор визуализаций, показывающих ключевые зависимости и выводы.
 • Описание проделанных шагов и краткий анализ результатов.
import pandas as pd
import seaborn as sns 
import matplotlib.pyplot as plt
1. Импорт и первичный анализ данных. Exploratory Data Analysis (EDA)
• Загрузите данные из файлов train.csv, test.csv и gender_submission.csv.
 • Проведите базовое исследование структуры данных, используя методы .head(), .info() и .describe(), чтобы понять, какие столбцы содержат пропуски или выбросы.
train = pd.read_csv('train.csv')
test = pd.read_csv('test1.csv')
submission = pd.read_csv('gender_submission.csv')
train.head()
train.info()
train.describe()
test.head()
test.info()
test.describe()
submission.head()
submission.info()
submission.describe()

2. Очистка данных. Data Cleaning

• Обработка пропущенных значений:
   - Столбец Age: Заполните пропуски медианным значением или средним значением в зависимости от пассажирского класса и пола.
   - Столбец Embarked: Заполните пропуски наиболее частым значением.
   - Столбец Cabin: Этот столбец может содержать много пропусков, поэтому можно либо оставить только первую букву каюты, либо удалить столбец полностью.
   - Столбец Fare: Проверьте наличие пропущенных значений и заполните их медианным значением. 
   
• Обработка выбросов:
   - Проверьте значения в столбцах Age и Fare на наличие аномально высоких или низких значений и решите, что с ними делать.
Embarked: обозначает порт, из которого пассажир сел на борт корабля.
C — Cherbourg (Шербур)
Q — Queenstown (Куинстаун)
S — Southampton (Саутгемптон)
test_merged = pd.merge(submission, test, how='outer')
alldata = pd.merge(test_merged, train, how='outer')
alldata.head()
alldata.shape
alldata['Age'] = alldata.groupby(['Pclass', 'Sex'])['Age'].transform(lambda x: x.fillna(x.median()))
alldata['Embarked'].fillna(alldata['Embarked'].mode()[0])
alldata['Fare'].fillna(alldata['Fare'].median())
alldata['Fare']=alldata['Fare'].fillna(alldata['Fare'].median())
alldata.isnull().sum()
• Обработка выбросов:
   - Проверьте значения в столбцах Age и Fare на наличие аномально высоких или низких значений и решите, что с ними делать.
Embarked: обозначает порт, из которого пассажир сел на борт корабля.
C — Cherbourg (Шербур)
Q — Queenstown (Куинстаун)
S — Southampton (Саутгемптон)
# Проверка распределения значений Age
sns.boxplot(x=alldata['Age'])
plt.title('Распределение значений Age') 
plt.show()
# Проверка распределения значений Fare
sns.boxplot(x=alldata['Fare'])
plt.title('Распределение значений Fare') 
plt.show()
# Обработка выбросов в столбце Age
Q1 = alldata['Age'].quantile(0.25)
Q3 = alldata['Age'].quantile(0.75)
IQR = Q3 - Q1
lower_bound_age = Q1 - 1.5 * IQR
upper_bound_age = Q3 + 1.5 * IQR
alldata = alldata[(alldata['Age'] >= lower_bound_age) & (alldata['Age'] <= upper_bound_age)]
alldata['Age'].describe()

3. Создание новых признаков. Feature Engineering
• Извлеките титул пассажира из столбца Name и создайте новый признак Title, который может повлиять на выживаемость.
 • Создайте признак FamilySize на основе количества родственников на борту (SibSp и Parch).
 • Создайте бинарный признак IsAlone, указывающий, путешествовал ли пассажир один.
# Извлечение титулов из имени пассажира

alldata['Title'] = alldata['Name'].apply(lambda name: name.split(',')[1].split('.')[0].strip())
print(alldata['Title'].value_counts())
# Создание признака FamilySize 
alldata['FamilySize'] = alldata['SibSp'] + alldata['Parch'] + 1 

# Просмотр первых 5 значений нового признака FamilySize 
print(alldata[['SibSp', 'Parch', 'FamilySize']].head())
# Создание бинарного признака IsAlone 
alldata['IsAlone'] = 0 # Изначально считаем, что все путешествовали не одни 
alldata.loc[alldata['FamilySize'] == 1, 'IsAlone'] = 1 # Если FamilySize == 1, значит человек одинок 
# Просмотр первых 5 значений нового признака IsAlone 
print(alldata[['FamilySize', 'IsAlone']].head())

4. Анализ и визуализация данных. Data Visualization
• Проведите анализ факторов, влияющих на выживаемость, с помощью следующих визуализаций:
   - Гистограмма выживаемости (Survived): Покажите распределение выживания по категориям (выжил / не выжил).
   - Гистограмма распределения возраста (Age): Покажите распределение возраста среди выживших и не выживших.
   - Диаграмма размаха (boxplot) для стоимости билета (Fare): Показать разброс стоимости билета в зависимости от класса (Pclass) и статуса выживаемости.
   - Столбчатая диаграмма по классу и полу (Pclass, Sex): Сравните процент выживших в разных классах для мужчин и женщин.
   - Групповая столбчатая диаграмма (barplot) для FamilySize и выживаемости: Показать влияние размера семьи на выживаемость.
   - Круговая диаграмма для пункта отправления (Embarked): Показать процент выживших и не выживших для каждого пункта отправления.
   - Диаграмма рассеяния (scatterplot): Показать взаимосвязь между возрастом и стоимостью билета, используя цвет для обозначения выживаемости (Survived).
   - Тепловая карта корреляций (heatmap): Постройте корреляционную матрицу для количественных переменных, чтобы выявить взаимосвязи между различными признаками.
- Гистограмма выживаемости (Survived): Покажите распределение выживания по категориям (выжил / не выжил).
plt.figure(figsize=(6, 4))
sns.countplot(x='Survived', data=alldata)
plt.title('Распределение выживания')
plt.xlabel('Выживание (0 = не выжил, 1 = выжил)')
plt.ylabel('Количество')
plt.show()
# 2. Гистограмма распределения возраста (Age) среди выживших и не выживших
plt.figure(figsize=(8, 6))
sns.histplot(data=alldata, x='Age', hue='Survived', multiple='stack', kde=False, bins=30, palette='viridis')
plt.title('Распределение возраста среди выживших и не выживших')
plt.xlabel('Возраст')
plt.ylabel('Количество')
plt.show()
# 3. Диаграмма размаха (boxplot) для стоимости билета (Fare) в зависимости от класса (Pclass) и статуса выживаемости
plt.figure(figsize=(10, 6))
sns.boxplot(x='Pclass', y='Fare', hue='Survived', data=alldata)
plt.title('Стоимость билета по классу и выживаемости')
plt.xlabel('Класс')
plt.ylabel('Стоимость билета')
plt.show()
# 4.Столбчатая диаграмма выживаемости по классу и полу 
sns.catplot(x='Pclass', hue='Survived', col='Sex', kind='count', data=alldata) 
plt.suptitle('Выживаемость по классу и полу')
plt.show()
# 5.Групповая столбчатая диаграмма для FamilySize и выживаемости 
sns.countplot(x='FamilySize', hue='Survived', data=alldata)
plt.title('Выживаемость в зависимости от размера семьи') 
plt.xlabel('Размер семьи') 
plt.ylabel('Количество пассажиров')
plt.show()
# 6. Круговая диаграмма для пункта отправления
embarked_survived = alldata[alldata['Survived'] == 1]['Embarked'].value_counts()
embarked_total = alldata['Embarked'].value_counts()
embarked_survival_rate = (embarked_survived / embarked_total) * 100

plt.pie(embarked_survival_rate, labels=embarked_survival_rate.index, autopct='%1.1f%%')
plt.title('Процент выживаемости по пункту отправления')
plt.show()
# 7. Диаграмма рассеяния зависимости возраста и стоимости билета от выживаемости
sns.scatterplot(x='Age', y='Fare', hue='Survived', data=alldata)
plt.show()
# 8. Тепловая карта корреляций
plt.figure(figsize=(10, 8))
numeric = alldata.select_dtypes(include=[float, int])
sns.heatmap(numeric.corr(), annot=True, cmap='coolwarm')
plt.title('Корреляционная матрица')
plt.show()

5. Сортировка и группировка данных. Data Aggregation & Grouping

• Выполните группировку по таким признакам, как Pclass, Sex, Embarked и FamilySize, чтобы изучить средний показатель выживаемости для каждой группы.

 • Используйте группировку и сортировку для анализа зависимости между стоимостью билета и классом (Pclass), а также между размером семьи и выживаемостью.
# Группировки по классу: 
# (Pclass)
pclass = alldata.groupby('Pclass')['Survived'].mean().reset_index()
pclass
# (Sex)
sex = alldata.groupby('Sex')['Survived'].mean().reset_index()
sex
# (Embarked)
embarked = alldata.groupby('Embarked')['Survived'].mean().reset_index()
embarked
# (FamilySize)
familySize = alldata.groupby('FamilySize')['Survived'].mean().reset_index()
familySize
• Используйте группировку и сортировку для анализа зависимости между стоимостью билета и классом (Pclass), а также между размером семьи и выживаемостью.
# Группировка и сортировка стоимости билета по классам (Pclass)
ticket_price = alldata.groupby('Pclass')['Fare'].mean().sort_values(ascending=False).reset_index()
print("\nСредняя стоимость билета по классам (Pclass):")
ticket_price

# Группировка и сортировка выживаемости по размеру семьи (FamilySize)
family_size = alldata.groupby('FamilySize')['Survived'].mean().sort_values(ascending=False).reset_index()
print("\nСредний показатель выживаемости по размеру семьи (FamilySize):")
family_size

6. Подготовка отчета. Report Preparation 
• Оформите краткий отчет о проделанной работе с описанием подходов к очистке и обработке данных, выводами по визуализациям и выявленным факторам, влияющим на выживаемость пассажиров. 
Результат Ваш проект должен включать: • Очищенные данные. • Набор визуализаций, показывающих ключевые зависимости и выводы. • Описание проделанных шагов и краткий анализ результатов.
## Отчет по проекту анализа данных пассажиров Титаника


1. Очистка данных (Data Cleaning)
Подходы к очистке данных:
Обработка пропущенных значений:
Age: Пропущенные значения были заполнены медианным значением в зависимости от пассажирского класса и пола.
Embarked: Пропущенные значения были заполнены наиболее частым значением ('S' - Southampton).
Fare: Пропущенные значения были заполнены медианным значением.
Обработка выбросов:
Аномально высокие или низкие значения в столбцах Age и Fare были удалены с использованием межквартильного интервала (IQR).

2. Создание новых признаков (Feature Engineering)
Шаги создания новых признаков:
Title: Извлечение титулов пассажиров из столбца Name, что позволило выявить влияние социального статуса на выживаемость.
FamilySize: Создание нового признака, объединяющего количество родственников на борту (SibSp и Parch) с самим пассажиром.
IsAlone: Бинарный признак, указывающий, путешествовал ли пассажир один.

3. Визуализация данных (Data Visualization)
Выводы по визуализациям:
Гистограмма выживаемости: Большинство пассажиров не выжило, однако доля выживших составляет значительную часть.
Гистограмма распределения возраста: Младшие пассажиры (дети) имели более высокие шансы на выживание.
Диаграмма размаха стоимости билета: Пассажиры первого класса платили значительно больше, и их шансы на выживание были выше.
Столбчатая диаграмма по классу и полу: Женщины и пассажиры первого класса имели наивысшие шансы на выживание. 
Групповая столбчатая диаграмма для FamilySize: Пассажиры с маленькими семьями имели наибольшие шансы на выживание.
Круговая диаграмма для пункта отправления: Пассажиры, севшие на корабль в Cherbourg, имели более высокие шансы на выживание.
Диаграмма рассеяния возраста и стоимости билета: Взаимосвязь между возрастом и стоимостью билета не является значительной, но более дорогие билеты связаны с более высокими шансами на выживание.
Тепловая карта корреляций: Наиболее сильная корреляция наблюдается между Pclass и Fare, а также между SibSp и Parch.

4. Группировка и сортировка данных (Data Aggregation & Grouping)
Анализ группировок:
Средний показатель выживаемости был наивысшим среди пассажиров первого класса и женщин.
Пассажиры, севшие на корабль в Cherbourg, имели более высокие шансы на выживание.
Пассажиры с меньшими семьями имели более высокие шансы на выживание.
Анализ стоимости билета и класса:
Пассажиры первого класса платили значительно больше за билеты по сравнению с пассажирами второго и третьего классов.
Анализ зависимости выживаемости от размера семьи:
Пассажиры, путешествующие в одиночку, имели более низкие шансы на выживание по сравнению с пассажирами, путешествующими с семьей.

Заключение

Этот проект показал важность различных факторов, таких как класс, пол, возраст, размер семьи и стоимость билета, в выживании пассажиров Титаника. Визуализации и анализ данных помогли выявить ключевые зависимости и факторы, влияющие на выживаемость.

